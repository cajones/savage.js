(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Trait=require("./Trait"),Attribute=function(){Trait.apply(this,arguments)};Attribute.prototype=Trait.prototype,Attribute.Agility="agility",Attribute.Smarts="smarts",Attribute.Spirit="spirit",Attribute.Strength="strength",Attribute.Vigor="vigor",module.exports=Attribute;
},{"./Trait":19}],2:[function(require,module,exports){
var Collection=require("./Collection"),Trait=require("./Trait"),Rank=require("./Rank"),Attribute=require("./Attribute"),Formatters=require("./Formatters"),Character=function(t){this.name=t,this.rank=new Rank,this.pace=6,this.race=null,this[Attribute.Agility]=new Trait("d4"),this[Attribute.Smarts]=new Trait("d4"),this[Attribute.Spirit]=new Trait("d4"),this[Attribute.Strength]=new Trait("d4"),this[Attribute.Vigor]=new Trait("d4"),Object.defineProperty(this,"parry",{get:function(){return this.isUnskilled("Fighting")?2:2+this.skills.Fighting.effect/2}}),Object.defineProperty(this,"toughness",{get:function(){return 2+this.vigor.effect/2}}),Object.defineProperty(this,"charisma",{get:function(){return 0}}),this.skills=new Collection,this.edges=new Collection,this.hindrances=new Collection};Character.prototype.getAttributePoints=function(){var t=[this[Attribute.Agility],this[Attribute.Smarts],this[Attribute.Spirit],this[Attribute.Strength],this[Attribute.Vigor]];return t.reduce(function(t,r){return t+r.factor},0)},Character.prototype.getSkillPoints=function(){var t=this.skills.values(),r=t.reduce(function(t,r){return t+r.factor},t.length),e=t.map(function(t){return Math.max(t.factor-this[t.linkedAttribute].factor,0)}.bind(this)).reduce(function(t,r){return t+r},0);return r+e},Character.prototype.hasSkill=function(t){return"string"==typeof t&&(t={name:t}),!!this.skills[t.name]},Character.prototype.isUnskilled=function(t){return!this.skills.contains(t)},Character.prototype.learn=function(t){return this.hasSkill(t)?this.skills[t.name].increase():this.skills[t.name]=t,this},Character.prototype.toString=function(){return Formatters.defaultFormatter.call(this)},module.exports=Character;
},{"./Attribute":1,"./Collection":3,"./Formatters":8,"./Rank":11,"./Trait":19}],3:[function(require,module,exports){
var Collection=function(){Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length}})};Collection.prototype={add:function(t,e){return this.contains(t)?!1:(1===arguments.length&&"object"==typeof t&&t.toString&&(e=t,t=e.toString()),this[t]=e,!0)},remove:function(t){return this.contains(t)?(delete this[t],!0):!1},contains:function(t){return"undefined"!=typeof this[t]||-1!=Object.keys(this).indexOf(t)},keys:function(){return Object.keys(this)},values:function(){return this.keys().map(function(t){return this[t]}.bind(this))},map:function(){return Array.prototype.map.apply(this.values(),arguments)},filter:function(){return Array.prototype.filter.apply(this.values(),arguments)},reduce:function(){return Array.prototype.reduce.apply(this.values(),arguments)},forEach:function(){return Array.prototype.forEach.apply(this.values(),arguments)}},module.exports=Collection;
},{}],4:[function(require,module,exports){
var Attribute=require("./Attribute"),Edge=require("./Edge");module.exports=[new Edge("Alertness",Edge.requires("N"),"+2 Notice"),new Edge("Ambidextrous",[Edge.requires("N"),Edge.requires(Attribute.Agility,"d8")],"Ignore -2 penalty for using off-hand"),new Edge("Arcane Background",Edge.requires("N"),"Allows access to supernatural powers"),new Edge("Arcane Resistance",[Edge.requires("N"),Edge.requires(Attribute.Spirit,"d8")],"Armor 2 vs. magic, +2 to resist magic effects"),new Edge("Improved Arcane Resistance",[Edge.requires("N"),Edge.requires("Arcane Resistance")],"Armor 4 vs. magic, +4 to resist magic effects"),new Edge("Attractive",[Edge.requires("N"),Edge.requires(Attribute.Vigor,"d6")],"Charisma +2"),new Edge("Very Attractive",[Edge.requires("N"),Edge.requires("Attractive")],"Charisma +4"),new Edge("Berserk",[Edge.requires("N")],"Smarts roll or go Berserk after being wounded; +2 Fighting and Strength rolls, -2 Parry, +2 Toughness; Roll of 1on Fighting die hits random adjacent target"),new Edge("Brave",[Edge.requires("N"),Edge.requires(Attribute.Spirit,"d6")],"+2 to Fear tests"),new Edge("Brawny",[Edge.requires("N"),Edge.requires(Attribute.Strength,"d6"),Edge.requires(Attribute.Vigor,"d6")],"Toughness +1; load limit is 8xStr instead of 5xStr"),new Edge("Fast Healer",[Edge.requires("N"),Edge.requires(Attribute.Vigor,"d8")],"+2 to natural healing rolls"),new Edge("Fleet-Footed",[Edge.requires("N"),Edge.requires(Attribute.Agility,"d6")],"+2 Pace, d10 running die instead of d6"),new Edge("Linguist",[Edge.requires("N"),Edge.requires(Attribute.Smarts,"d6")],"Begin play with a number of languages equal to Smarts; Smarts –2 to be understood in any language heard for a week"),new Edge("Luck",[Edge.requires("N")],"+1 Benny per session"),new Edge("Great Luck",[Edge.requires("N")],"+2 Benny per session"),new Edge("Noble",[Edge.requires("N")],"+2 Charisma; Character is noble born with status and wealth"),new Edge("Quick",[Edge.requires("N"),Edge.requires(Attribute.Agility,"d8")],"Discard draw of 5 or less for new card"),new Edge("Rich",[Edge.requires("N")],"3x starting funds, $75K annual salary"),new Edge("Filty rich",[Edge.requires("N"),Edge.requires.either("Rich","Noble")],"5x starting funds, $250K annual salary")];
},{"./Attribute":1,"./Edge":5}],5:[function(require,module,exports){
var Edge=function(e,r,t){Object.defineProperty(this,"name",{value:e}),Object.defineProperty(this,"requirements",{value:Array.isArray(r)?r:[r]}),Object.defineProperty(this,"effect",{value:t})};Edge.prototype.isMet=function(){return!1},Edge.prototype.isAvailableTo=function(e){return e.edges.reduce(function(r,t){return r&&t.isMet(e)},!0)},Edge.prototype.toString=function(){return this.name},Edge.requires=function(){var e=require("./Skill"),r=require("./Attribute"),t=require("./Rank"),n=require("./Requirements/SkillRequirement"),i=require("./Requirements/AttributeRequirement"),u=require("./Requirements/RankRequirement"),s=require("./Requirements/EdgeRequirement");if(1===arguments.length){var o=arguments[0];return t.isRank(o)?new u(o):"object"==typeof o&&o instanceof e?new n(o):new s(o)}var a=arguments[0],q=arguments[1],g=arguments[2];return a===r.Agility||a===r.Smarts||a===r.Spirit||a===r.Strength||a===r.Vigor?new i(a,q):new n(a,q,g)},Edge.requires.either=function(e,r){var t=require("./Requirements/EitherRequirement"),n=require("./Requirements/EdgeRequirement");return"string"==typeof e&&(e=new n(r)),"string"==typeof r&&(r=new n(r)),new t(e,r)},module.exports=Edge;
},{"./Attribute":1,"./Rank":11,"./Requirements/AttributeRequirement":12,"./Requirements/EdgeRequirement":13,"./Requirements/EitherRequirement":14,"./Requirements/RankRequirement":15,"./Requirements/SkillRequirement":16,"./Skill":18}],6:[function(require,module,exports){
var Collection=require("./Collection"),Edges=new Collection;Object.defineProperty(Edges,"extend",{enumerable:!1,value:function(e){if(Array.isArray(e)&&e.forEach(function(e){this.add(e.name,e)}.bind(this)),"object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&this.add(r,e[r]);return this}}}),module.exports=Edges;
},{"./Collection":3}],7:[function(require,module,exports){
var MarkdownCharacterFormatter=function(){var n=this.name+"\n"+(this.race?this.race.toString()+" ":"")+this.rank.toString()+"\n===============================\nAgility "+this.agility.value+"\nSmarts "+this.smarts.value+"\nSpirit "+this.spirit.value+"\nStrength "+this.strength.value+"\nVigor "+this.vigor.value+"\n\nSkills\n------\n"+this.skills.reduce(function(n,t){return n+t.name+" "+t.value+"\n"},"")+"\nHindrances\n----------\n"+this.hindrances.reduce(function(n,t){return n+t.name+" ("+t.severity+")\n"},"")+"\nEdges\n-----\n"+this.edges.reduce(function(n,t){return n+t.name+"\n"},"");return n};module.exports=MarkdownCharacterFormatter;
},{}],8:[function(require,module,exports){
module.exports={defaultFormatter:require("./MarkdownCharacterFormatter"),MarkdownCharacterFormatter:require("./MarkdownCharacterFormatter")};
},{"./MarkdownCharacterFormatter":7}],9:[function(require,module,exports){
var Hindrance=function(n,e,r){Object.defineProperty(this,"name",{value:n}),Object.defineProperty(this,"effect",{value:r}),Object.defineProperty(this,"severity",{value:/^Major$/i.test(e)?"Major":"Minor"}),Object.defineProperty(this,"isMajor",{value:/^Major$/i.test(e)})};Hindrance.prototype.toString=function(){return this.name},Hindrance.AllThumbs=function(){return new Hindrance("All Thumbs","Minor","–2 Repair; Roll of 1 causes malfunction")},Hindrance.Anemic=function(){return new Hindrance("Anemic","Minor","–2 to Fatigue tests")},Hindrance.Arrogant=function(){return new Hindrance("Arrogant","Major","Must humiliate opponent, challenge the ‘leader’")},Hindrance.BadEyes=function(){return new Hindrance("Bad Eyes","Major","–2 to attack or notice something more than 5” distant")},Hindrance.SlightlyBadEyes=function(){return new Hindrance("Bad Eyes","Minor","Without corrective lens: –2 to attack or notice something more than 5” distant")},Hindrance.BadLuck=function(){return new Hindrance("Bad Luck","Major","One less Benny per session")},Hindrance.BigMouth=function(){return new Hindrance("Big Mouth","Minor","Unable to keep a secret, blabs at the worst time")},Hindrance.Blind=function(){return new Hindrance("Blind","Major","–6 to all actions that rely on vision; –2 on social rolls, gain additional Edge")},Hindrance.Bloodthirsty=function(){return new Hindrance("Bloodthirsty","Major","Never takes prisoner")},Hindrance.Cautious=function(){return new Hindrance("Cautious","Minor","Character is overly careful")},Hindrance.Clueless=function(){return new Hindrance("Clueless","Major","-2 to most Common Knowledge rolls")},Hindrance.CodeOfHonour=function(){return new Hindrance("Code of Honor","Major","Character keeps his word and acts like a gentleman")},Hindrance.DeathWish=function(){return new Hindrance("Death Wish","Major","Hero wants to die after completing some task")},Hindrance.Delusional=function(){return new Hindrance("Delusional","Major","Character suffers from grave delusions")},Hindrance.SlightlyDelusional=function(){return new Hindrance("Delusional","Minor","Character suffers from mild delusions")},Hindrance.DoubtingThomas=function(){return new Hindrance("Doubting Thomas","Minor","Character doesn’t believe in the supernatural")},Hindrance.Elderly=function(){return new Hindrance("Elderly","Major","Pace –1, –1 to Strength and Vigor die types; +5 skill points for any skill linked to Smarts")},Hindrance.Enemy=function(){return new Hindrance("Enemy","Major","Character has a recurring nemesis of some sort")},Hindrance.MinorEnemy=function(){return new Hindrance("Enemy","Minor","Character has a recurring nemesis of some sort")},Hindrance.Greedy=function(){return new Hindrance("Greedy","Major","Character is obsessed with wealth")},Hindrance.SlightlyGreedy=function(){return new Hindrance("Greedy","Minor","Character is inclined to obtain wealth")},Hindrance.Habit=function(){return new Hindrance("Habit","Major","Charisma –1; Fatigue rolls when deprived of Major Habits")},Hindrance.SlightHabit=function(){return new Hindrance("Habit","Minor","Charisma –1")},Hindrance.HardOfHearing=function(){return new Hindrance("Hard of Hearing","Major","–2 to Notice sounds; automatic failure if completely deaf")},Hindrance.SlightlyHardOfHearing=function(){return new Hindrance("Hard of Hearing"," Minor","–2 to Notice sounds; automatic failure if completely deaf")},Hindrance.Heroic=function(){return new Hindrance("Heroic","Major","Character always helps those in need")},Hindrance.Illiterate=function(){return new Hindrance("Illiterate","Minor","Hero is unable to read or write")},Hindrance.Lame=function(){return new Hindrance("Lame","Major","–2 Pace and running die is a d4")},Hindrance.Loyal=function(){return new Hindrance("Loyal","Minor","The hero tries to never betray or disappoint his friends")},Hindrance.Mean=function(){return new Hindrance("Mean","Minor","–2 to his Charisma for ill-temper and surliness")},Hindrance.Obese=function(){return new Hindrance("Obese","Minor","+1 Toughness, –1 Pace, d4 running die")},Hindrance.OneArm=function(){return new Hindrance("One Arm","Major","–4 to tasks requiring two arms")},Hindrance.OneEye=function(){return new Hindrance("One Eye","Major","-1 Charisma, –2 to rolls requiring depth perception")},Hindrance.OneLeg=function(){return new Hindrance("One Leg","Major","Pace –2, d4 running die, –2 to rolls requiring mobility, –2 to Swimming skill")},Hindrance.Outsider=function(){return new Hindrance("Outsider","Minor","-2 Charisma")},Hindrance.Overconfident=function(){return new Hindrance("Overconfident","Major","The hero believes he can do anything")},Hindrance.Pacifist=function(){return new Hindrance("Pacifist","Major","Won’t harm living creatures")},Hindrance.MinorPacifist=function(){return new Hindrance("Pacifist","Minor","Character fights only in self-defense")},Hindrance.Phobia=function(){return new Hindrance("Phobia","Major","–4 Trait tests when near the phobia")},Hindrance.SlightPhobia=function(){return new Hindrance("Phobia","Minor","–2 Trait tests when near the phobia")},Hindrance.Poverty=function(){return new Hindrance("Poverty","Minor","Half starting funds, inability to hang onto future income")},Hindrance.Quirk=function(){return new Hindrance("Quirk","Minor","Character has some minor but persistent foible")},Hindrance.Small=function(){return new Hindrance("Small","Major","–1 Toughness")},Hindrance.Stubborn=function(){return new Hindrance("Stubborn","Minor","Hero always wants his way")},Hindrance.Ugly=function(){return new Hindrance("Ugly","Minor","–2 Charisma due to appearance")},Hindrance.Vengeful=function(){return new Hindrance("Vengeful","Major","Character holds a grudge; will kill")},Hindrance.SlightlyVengeful=function(){return new Hindrance("Vengeful","Minor","Character holds a grudge")},Hindrance.Vow=function(){return new Hindrance("Vow","Major","A pledge to a group, deity, or religion")},Hindrance.MinorVow=function(){return new Hindrance("Vow","Minor","A pledge to a group, deity, or religion")},Hindrance.Wanted=function(){return new Hindrance("Wanted","Major","The character is a criminal of some sort")},Hindrance.SlightlyWanted=function(){return new Hindrance("Wanted","Minor","The character is a criminal of some sort")},Hindrance.Yellow=function(){return new Hindrance("Yellow","Major","The character is cowardly and suffers –2 to Fear checks")},Hindrance.Young=function(){return new Hindrance("Young","Major","Only 3 points for Attributes, 10 skill points, +1 Benny per session")},module.exports=Hindrance;
},{}],10:[function(require,module,exports){
var Race=function(e){this.name=e};Race.prototype.toString=function(){return this.name},Race.Human=new Race("Human"),module.exports=Race;
},{}],11:[function(require,module,exports){
var Rank=function(n){this.xp=parseInt(n)||0,Object.defineProperty(this,"name",{get:function(){return this.xp<20?"Novice":this.xp<40?"Seasoned":this.xp<60?"Veteran":this.xp<80?"Heroic":"Legendary"}})};Rank.prototype.increase=function(n){return this.xp+=Math.max(0,parseInt(n)),this},Rank.Novice=Rank.N=function(){return new Rank(0)},Rank.Seasoned=Rank.S=function(){return new Rank(20)},Rank.Veteran=Rank.V=function(){return new Rank(40)},Rank.Heroic=Rank.H=function(){return new Rank(60)},Rank.Legendary=Rank.L=function(){return new Rank(80)},Rank.create=function(n){return this.isRank(n)?Rank[n].call():Rank.Novice()},Rank.isRank=function(n){if(n instanceof Rank)return!0;var e=/^N(ovice)?$|^S(easoned)?$|^V(eteran)?$|^H(eroic)?$|^L(egendary)?$/i;return e.test(n)},module.exports=Rank;
},{}],12:[function(require,module,exports){
var Trait=require("../Trait"),AttributeRequirement=function(t,e){this.attribute=t,this.value=new Trait(e)};AttributeRequirement.prototype.isMet=function(t){return t[this.attribute].factor>=this.value.factor},module.exports=AttributeRequirement;
},{"../Trait":19}],13:[function(require,module,exports){
var EdgeRequirement=function(e){this.edge=e};EdgeRequirement.prototype.isMet=function(e){return e.edges.contains(this.edge)},module.exports=EdgeRequirement;
},{}],14:[function(require,module,exports){
var EitherRequirement=function(e,t){this.first=e,this.second=t};EitherRequirement.prototype.isMet=function(e){return this.first.isMet(e)||this.second.isMet(e)},module.exports=EitherRequirement;
},{}],15:[function(require,module,exports){
var Rank=require("../Rank"),RankRequirement=function(e){this.rank="string"==typeof e?Rank.create(e):e};RankRequirement.prototype.isMet=function(e){var n=new RegExp("^"+this.rank.name[0],"i");return n.test(e.rank.name)},module.exports=RankRequirement;
},{"../Rank":11}],16:[function(require,module,exports){
var Skill=require("../Skill"),SkillRequirement=function(l,i,e){this.skill="string"==typeof l&&arguments.length>=2?new Skill(i,l,e):l};SkillRequirement.prototype.isMet=function(l){return l.hasSkill(this.skill)&&l.skills[this.skill.name].factor>=this.skill.factor},module.exports=SkillRequirement;
},{"../Skill":18}],17:[function(require,module,exports){
!function(e,r){"function"==typeof define&&define.amd?define(function(){return e.Savage=r()}):"object"==typeof exports&&(module.exports=e.Savage=r()),"undefined"!=typeof window&&(window.Savage=e.Savage)}(this,function(){return{Character:require("./Character"),Attribute:require("./Attribute"),Skill:require("./Skill"),Race:require("./Race"),Rank:require("./Rank"),Hindrance:require("./Hindrance"),Edge:require("./Edge"),Edges:require("./Edges").extend(require("./CoreEdges"))}});
},{"./Attribute":1,"./Character":2,"./CoreEdges":4,"./Edge":5,"./Edges":6,"./Hindrance":9,"./Race":10,"./Rank":11,"./Skill":18}],18:[function(require,module,exports){
var Trait=require("./Trait"),Attribute=require("./Attribute"),Skill=function(t,i,n){Trait.apply(this,arguments),Object.defineProperty(this,"name",{value:i}),Object.defineProperty(this,"linkedAttribute",{value:n||Attribute.Smarts})};Skill.prototype=new Trait,Skill.prototype.toString=function(){return this.name},Skill.Boating=function(){return new Skill("d4","Boating",Attribute.Agility)},Skill.Driving=function(){return new Skill("d4","Driving",Attribute.Agility)},Skill.Fighting=function(){return new Skill("d4","Fighting",Attribute.Agility)},Skill.Lockpicking=function(){return new Skill("d4","Lockpicking",Attribute.Agility)},Skill.Piloting=function(){return new Skill("d4","Piloting",Attribute.Agility)},Skill.Riding=function(){return new Skill("d4","Riding",Attribute.Agility)},Skill.Shooting=function(){return new Skill("d4","Shooting",Attribute.Agility)},Skill.Stealth=function(){return new Skill("d4","Stealth",Attribute.Agility)},Skill.Swimming=function(){return new Skill("d4","Swimming",Attribute.Agility)},Skill.Throwing=function(){return new Skill("d4","Throwing",Attribute.Agility)},Skill.Gambling=function(){return new Skill("d4","Gambling",Attribute.Smarts)},Skill.Healing=function(){return new Skill("d4","Healing",Attribute.Smarts)},Skill.Investigation=function(){return new Skill("d4","Investigation",Attribute.Smarts)},Skill.Notice=function(){return new Skill("d4","Notice",Attribute.Smarts)},Skill.Repair=function(){return new Skill("d4","Repair",Attribute.Smarts)},Skill.Streetwise=function(){return new Skill("d4","Streetwise",Attribute.Smarts)},Skill.Survival=function(){return new Skill("d4","Survival",Attribute.Smarts)},Skill.Taunt=function(){return new Skill("d4","Taunt",Attribute.Smarts)},Skill.Tracking=function(){return new Skill("d4","Tracking",Attribute.Smarts)},Skill.Intimidation=function(){return new Skill("d4","Intimidation",Attribute.Spirit)},Skill.Persuasion=function(){return new Skill("d4","Persuasion",Attribute.Spirit)},Skill.Climbing=function(){return new Skill("d4","Climbing",Attribute.Strength)},module.exports=Skill;
},{"./Attribute":1,"./Trait":19}],19:[function(require,module,exports){
var scale=["d4","d6","d8","d10","d12","d12+1","d12+2","d12+3","d12+4"],Trait=function(t){var e=t?scale.indexOf(t):0;Object.defineProperty(this,"factor",{get:function(){return e},set:function(t){e=Math.max(0,Math.min(scale.length,t))}}),Object.defineProperty(this,"value",{get:function(){return scale[this.factor]}}),Object.defineProperty(this,"effect",{get:function(){return 2*this.factor+4}})};Trait.prototype.increase=function(){return scale[++this.factor]},Trait.prototype.increaseTo=Trait.prototype.decreaseTo=function(t){return scale.indexOf(t)>-1&&(this.factor=scale.indexOf(t)),this},Trait.prototype.decrease=function(){return scale[--this.factor]},Trait.prototype.toString=function(){return"[Trait "+this.value+"]"},module.exports=Trait;
},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])